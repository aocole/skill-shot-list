<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
var dataset = <%= @machines_over_time.collect{|pair|pair[0] = pair[0].to_i * 1000; pair}.to_json.html_safe %>

w = 500
h = 500

var x = d3.time.scale()
    .range([0, w]).domain([d3.min(dataset, function(d){return new Date(d[0])}), d3.max(dataset, function(d){return new Date(d[0])})]);
var svg = d3.select("#railsmain")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

    svg.selectAll("circle")
   .data(dataset)
   .enter()
   .append("circle")
   .attr("fill", "white")   
   .attr("cx", function(d) {
        return x(new Date(d[0]));
   })
   .attr("cy", function(d) {
        return h - d[1];
   })
   .attr("r", 2);

</script>
